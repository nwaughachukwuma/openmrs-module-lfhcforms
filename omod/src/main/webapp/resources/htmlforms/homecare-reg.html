<htmlform formUuid="84e61aee-7d7f-4dfb-b305-7d59b89b762e" formName="Homecare Regular Visit" formEncounterType="4897af83-80b0-4ac3-bdd5-7cdf3467ff63
" formVersion="0.1"
formAddMetadata="yes"
formUILocation="patientDashboard.visitActions"
formOrder="25"
formIcon="icon-medkit"
formShowIf=""
formDisplayStyle="Simple"
>

<ifMode mode="VIEW" include="false">
	<uiInclude provider="lfhcforms" javascript="toggleContainers.js"/>

	<script type="text/javascript">
		jQuery(document).ready(function(){
			toggleContainers();

			$(".wong-baker-faces").hover(
				function() {
					$(".wong-baker-faces").not(this).addClass("greyed");
					$(this).removeClass("greyed");
					$(this).addClass("hovered");
				}, 
				function() {
					$(".wong-baker-faces").not(this).addClass("greyed");
					$(this).removeClass("hovered");
				});

			$(".wong-baker-faces").click(function () {

				$(".wong-baker-faces").addClass("greyed");

				if ($(this).hasClass("selected")) {
					$(".wong-baker-faces").removeClass("selected");
					$(".wong-baker-faces").removeClass("greyed");
					setValue("wb-score.value", "");	

				} else  {
					$(".wong-baker-faces").removeClass("selected");
					setValue("wb-score.value", $(this).attr("value"));
					$(this).addClass("selected");
					$(this).removeClass("greyed");
				}
			})
		});
	</script>

	<style type="text/css">
		.wong-baker-faces {
			opacity: 0.5;
			font-size: x-large;
		}
		.hovered {
			opacity: 1;
		}
		.selected {
			opacity: 1;	
		}
		.greyed {		
		}
	</style>
	
</ifMode>

<ifMode mode="VIEW">
	<script type="text/javascript" id="handleViewModeForTable">
		// JavaScript for VIEW mode
		jQuery(document).ready(function(){
			handleViewMode("84e61aee-7d7f-4dfb-b305-7d59b89b762e");
		});
	</script>
</ifMode>


<div class="hidden" id="who-when-where">
	<p id="who">
		<label>
			<uimessage code="coreapps.patientDashBoard.provider" />
		</label>
		<span>
			<encounterProvider default="currentUser" required="true" />
		</span>
	</p>
	<p id="when">
		<label>
			<uimessage code="coreapps.patientDashBoard.location" />
		</label>
		<span>
			<encounterLocation default="SessionAttribute:emrContext.sessionLocationId" />
		</span>
	</p>
	<p id="where">
		<label>
			<uimessage code="coreapps.patientDashBoard.date" />
		</label>
		<span>
			<!-- Mandatory showTime="true" to set encounter date and time -->
			<encounterDate id="encounterDate" default="now" showTime="true"/>
		</span>
	</p>
</div>

<section id="physical-assessment" sectionTag="section" headerStyle="title" headerCode="lfhcforms.homecare-regular-visit.section.physical-assessment">

	<!-- Comfort Level -->
	<fieldset field-separator=", ">
		<legend>
			<uimessage code="lfhcforms.homecare-regular-visit.legend.comfort-level" />
		</legend>
		<h3>
			<uimessage code="lfhcforms.homecare-regular-visit.legend.comfort-level" />
		</h3>
		<p style="margin-top:5%">
			<span id="wb-smile" value="2" class="wong-baker-faces icon-faces-smile"/>
			(2)
			<span id="wb-neutral" value="4" class="wong-baker-faces icon-faces-neutral"/>
			(4)
			<span id="wb-sad" value="6" class="wong-baker-faces icon-faces-sad"/>
			(6)
		</p>
		<p style="display:;">
			<span id="wb-title">Wong baker score</span>
			<obs id="wb-score" conceptId="CIEL:160287"/>
		</p>
	</fieldset>


	<!-- Appearance fieldset -->
	<fieldset field-separator=", ">
		<legend>
			Appearance
		</legend>
		<h3>
			Appearance
		</h3>
		<p>
			<obs id="sick" conceptId="CIEL:162741" answerConceptIds="CIEL:1065,CIEL:1066" answerLabels="Very sick,Not very sick" size="3">
				<controls>
					<when value="CIEL:1065" thenDisplay="#very-sick" />
				</controls>
			</obs>
			<ifMode mode="VIEW" include="false">
				<span id="very-sick">
					<font color="red"><strong> Take urgently to doctor</strong></font>
				</span>
			</ifMode>
		</p>
	</fieldset>

	<fieldset field-separator=", ">
		<legend>
			Days sick
		</legend>
		<h3>
			Number of days sick
		</h3>

		<p>
			<obs conceptId="CIEL:1553" id="duration" showUnits="true" />
		</p>

	</fieldset>

	<fieldset field-separator=", ">
		<legend>
			Previous admission
			<!--<lookup expression="fn.getConcept('160029').name" /> -->
		</legend>
		<h3>
			Hospital admission during last year
		</h3>

		<p>
			<obs conceptId="CIEL:5703" id="previous-admission" style="yes_no_dropdown">
				<controls>
					<when value="true" thenDisplay="#previous-admission-yes" />
				</controls>
			</obs>
		</p>
		<span id="previous-admission-yes">
			<p>
				<span class="questionLabel">Number of times: </span>
				<obs conceptId="CIEL:5704" />
			</p>
			<repeat>
				<template>
					<p id="{n}-toggleContainer" templateBlockId="admission" class="toggleContainer" style="display:none;">
						<span class="questionLabel">Where: </span>
						<obs id="{n}" conceptId="CIEL:1273"/>
						<i class="addEntry icon-">&#xf055; Add</i>
						<i class="removeEntry icon-">   &#xf056; Remove</i>
					</p>
				</template>
				<render n="401"/>
				<render n="402"/>
				<render n="403"/>
				<render n="404"/>

			</repeat>

		</span>

	</fieldset>
	<fieldset field-separator=", ">
		<legend>
			Medication
			<!--<lookup expression="fn.getConcept('160029').name" /> -->
		</legend>
		<h3>
			Medication taking now
		</h3>

		<p>
			<obs conceptId="CIEL:159367" id="medication-now" answerConceptIds="CIEL:1065,CIEL:1066,CIEL:1067" size="4">
				<controls>
					<when value="CIEL:1065" thenDisplay="#medication-now-all" />
				</controls>
			</obs>
		</p>

		<p>
		</p>

		<span id="medication-now-all">
			<p>
				<repeat>
					<template>
						<p id="{n}-toggleContainer" templateBlockId="medication" class="toggleContainer" style="display:none;">
							<span class="questionLabel">Medication Family </span>
							<obs id="{n}" conceptId="CIEL:1193" />
							<i class="addEntry icon-">&#xf055; Add</i>
							<i class="removeEntry icon-">   &#xf056; Remove</i>
						</p>
					</template>
					<render n="101"/>
					<render n="102"/>
					<render n="103"/>
					<render n="104"/>
				</repeat>
			</p>


			<span id="medication-now-other">
				<repeat>
					<template>
						<p id="{n}-toggleContainer" templateBlockId="medicatioOther" class="toggleContainer" style="display:none;">
							<span class="questionLabel">Other </span>
							<obs id="{n}" conceptId="CIEL:160632" />
							<i class="addEntry icon-">&#xf055; Add</i>
							<i class="removeEntry icon-">   &#xf056; Remove</i>
						</p>
					</template>
					<render n="201"/>
					<render n="202"/>
					<render n="203"/>
					<render n="204"/>
				</repeat>

			</span>
		</span>
	</fieldset>

</section>


<submit />

</htmlform>